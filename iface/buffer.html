
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Buffers &#8212; DPC++ Reference  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script src="../_static/custom.js"></script>
    <link rel="shortcut icon" href="../_static/favicons.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Images" href="image.html" />
    <link rel="prev" title="Data access" href="../data.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/oneAPI-rgb-rev-100.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">DPC++ Reference  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../model/index.html">
   Programming Model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/sample-program.html">
     Anatomy of a DPC++ Program
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/platform-model.html">
     Platform Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/execution-model.html">
     Execution Model
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../model/memory-model.html">
     Memory Model
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../model/memory-objects.html">
       Memory Objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../model/accessors.html">
       Accessors
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../model/synchronization.html">
       Synchronization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../model/unified-shared-memory.html">
       Unified Shared Memory
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../model/memory-types.html">
       Memory Types
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/kernel-programming-model.html">
     Kernel Programming Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/error-handling.html">
     Error Handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../model/fall-back.html">
     Fall Back
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../dpcpp-index.html">
   Interface
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../header-file.html">
     Header File
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../namespaces.html">
     Namespaces
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../common.html">
     Common Interface
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="common-byval.html">
       By-value Semantics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="common-reference.html">
       Reference Semantics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="properties.html">
       property_list
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="param_traits.html">
       param_traits
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../runtime.html">
     Runtime Classes
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="device-selector.html">
       Device selectors
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="platform.html">
       Platforms
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="context.html">
       Contexts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="device.html">
       Devices
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="queue.html">
       Queues
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="event.html">
       Events
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../data.html">
     Data access
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Buffers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="image.html">
       Images
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="accessors.html">
       Accessors
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="buffer-accessor.html">
         sycl::accessor (buffer)
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="local-accessor.html">
         sycl::accessor (local memory)
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="image-accessor.html">
         sycl::accessor (image)
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="accessor-enums.html">
         sycl::access::mode
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="address-space.html">
       Multipointer
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="private_memory.html">
       sycl::private_memory
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sampler.html">
       Samplers
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../usm.html">
     Unified shared memory (USM)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="usm-malloc.html">
       sycl::malloc_device
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="usm_allocator.html">
       sycl::usm_allocator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="usm.html">
       sycl::usm::alloc
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../parallelism.html">
     Expressing parallelism
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="range.html">
       sycl::range
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="group.html">
       sycl::group
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="id.html">
       sycl::id
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="item.html">
       sycl::item
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="h_item.html">
       sycl::h_item
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="nd_item.html">
       sycl::nd_item
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="nd_range.html">
       sycl::nd_range
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="device-event.html">
       sycl::device_event
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="command-group.html">
       Command groups
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="command-group-handler.html">
       Invoking kernels
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="kernel.html">
       Kernels
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="program.html">
       Programs
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../error.html">
     Error handling
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="exception.html">
       Exceptions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../data-types.html">
     Data types
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="scalar-types.html">
       Scalar types
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="vector-types.html">
       Vector types
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../synchronization.html">
     Synchronization and atomics
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="types.html">
       Synchronization types
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../io.html">
     IO
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="stream.html">
       Streams
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../notices.html">
   Notices and Disclaimers
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/iface/buffer.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/oneapi-src/DPCPP_Reference/issues/new?title=Issue%20on%20page%20%2Fiface/buffer.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/oneapi-src/DPCPP_Reference/edit/dpcpp/source/iface/buffer.rst"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sycl-buffer">
   sycl::buffer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#constructors">
     (constructors)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-range">
     get_range
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-count">
     get_count
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-size">
     get_size
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-allocator">
     get_allocator
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-access">
     get_access
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-final-data">
     set_final_data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-write-back">
     set_write_back
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#is-sub-buffer">
     is_sub_buffer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reinterpret">
     reinterpret
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#buffer-properties">
   Buffer properties
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sycl-propery-buffer-use-host-ptr">
     sycl::propery::buffer:use_host_ptr
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#use-host-ptr-constructors">
       (constructors)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sycl-property-use-mutex">
     sycl::property::use_mutex
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#use-mutex-constructors">
       (constructors)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#get-mutex-ptr">
       get_mutex_ptr
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sycl-property-buffer-context-bound">
     sycl::property::buffer::context_bound
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#context-bound-constructors">
       (constructors)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#get-context">
       get_context
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <section id="buffers">
<span id="iface-buffers"></span><h1>Buffers<a class="headerlink" href="#buffers" title="Permalink to this headline">¶</a></h1>
<section class="api-class" id="sycl-buffer">
<h2>sycl::buffer<a class="headerlink" href="#sycl-buffer" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">T</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dimensions</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
          <span class="n">typename</span> <span class="n">AllocatorT</span> <span class="o">=</span> <span class="n">sycl</span><span class="p">::</span><span class="n">buffer_allocator</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">buffer</span><span class="p">;</span>
</pre></div>
</div>
<p class="rubric">Template parameters</p>
<table class="table">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>T</p></td>
<td><p>Type of data in buffer</p></td>
</tr>
<tr class="row-even"><td><p>dimensions</p></td>
<td><p>Dimensionality of data: 1, 2, or 3</p></td>
</tr>
<tr class="row-odd"><td><p>AllocatorT</p></td>
<td><p>Allocator for buffer data</p></td>
</tr>
</tbody>
</table>
<p>Buffers are containers for data that can be read/written by both
kernel and host.  Data in a buffer cannot be accessed directly via
pointers. Instead, a program creates an <a class="reference internal" href="buffer-accessor.html#buffer-accessor"><span class="std std-ref">sycl::accessor (buffer)</span></a> that
references the buffer. The accessor provides array-like interfaces to
read/write actual data.  Accessors indicate when they read or write
data. When a program creates an accessor for a buffer, the SYCL
runtime copies the data to where it is needed, either the host or the
device. If the accessor is part of a device command group, then the
runtime delays execution of the kernel until the data movement is
complete. If the host creates an accessor, it will pause until the
data is available on the host. As a result data and kernels can
execute asynchronously and in parallel, only requiring the program to
specify the data dependencies.</p>
<p>Initialization</p>
<blockquote>
<div><p>Buffers can be automatically initialized via host data, iterator, or
as a slice of another buffer. The constructor determines the
initialization method.</p>
</div></blockquote>
<p>Write back</p>
<blockquote>
<div><p>The destructor for a buffer can optionally write the data back to
host memory, either by pointer or iterator. <a class="reference internal" href="#set-final-data">set_final_data</a> and
<a class="reference internal" href="#set-write-back">set_write_back</a> control the write back of data.</p>
</div></blockquote>
<p>Memory allocation</p>
<blockquote>
<div><p>The SYCL runtimes uses the default allocator for buffer memory
allocation, unless the constructor provides an allocator.</p>
</div></blockquote>
<p class="rubric">Member types</p>
<table class="table">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>value_type</p></td>
<td><p>type of buffer element</p></td>
</tr>
<tr class="row-even"><td><p>reference</p></td>
<td><p>reference type of buffer element</p></td>
</tr>
<tr class="row-odd"><td><p>const_reference</p></td>
<td><p>const reference type of buffer element</p></td>
</tr>
<tr class="row-even"><td><p>allocator_type</p></td>
<td><p>type of allocator for buffer data</p></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://www.khronos.org/registry/SYCL/specs/sycl-2020-provisional.pdf">SYCL Specification</a> Section 4.7.2</p>
</div>
<section id="constructors">
<span id="buffer-constructors"></span><h3>(constructors)<a class="headerlink" href="#constructors" title="Permalink to this headline">¶</a></h3>
<pre class="literal-block">buffer(const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       const sycl::property_list &amp;propList = {});
buffer(const sycl::range&lt;dimensions&gt; &amp;bufferRange, AllocatorT allocator,
       const sycl::property_list &amp;propList = {});
buffer(T <em>hostData, const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       const sycl::property_list &amp;propList = {});
buffer(T *hostData, const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       AllocatorT allocator, const sycl::property_list &amp;propList = {});
buffer(const T *hostData, const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       const sycl::property_list &amp;propList = {});
buffer(const T *hostData, const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       AllocatorT allocator, const sycl::property_list &amp;propList = {});
buffer(const shared_ptr_class&lt;T&gt; &amp;hostData,
       const sycl::range&lt;dimensions&gt; &amp;bufferRange, AllocatorT allocator,
       const sycl::property_list &amp;propList = {});
buffer(const shared_ptr_class&lt;T&gt; &amp;hostData,
       const sycl::range&lt;dimensions&gt; &amp;bufferRange,
       const sycl::property_list &amp;propList = {});
buffer(buffer&lt;T, dimensions, AllocatorT&gt; b, const id&lt;dimensions&gt; &amp;baseIndex,
       const sycl::range&lt;dimensions&gt; &amp;subRange);

*Available only when:
 dimensions == 1</em>

template &lt;class InputIterator&gt;
buffer&lt;T, 1&gt;(InputIterator first, InputIterator last, AllocatorT allocator,
             const sycl::property_list &amp;propList = {});
template &lt;class InputIterator&gt;
buffer&lt;T, 1&gt;(InputIterator first, InputIterator last,
             const sycl::property_list &amp;propList = {});
buffer(cl_mem clMemObject, const sycl::context &amp;syclContext,
       event availableEvent = {});</pre>
<p>Construct a buffer.</p>
<p>Buffers can be initialized by a host data pointer. While the buffer
exists, it <em>owns</em> the host data and direct access of the host data
pointer during that time is undefined. The SYCL runtime performs a
write back of the buffer data back to the host data pointer when the
buffer is destroyed.  Buffers can also be initialized as a slice of
another buffer, by specifying the origin of the data and the
dimensions.</p>
<p>A constructor can also accept cl_mem or iterators to initialize a
buffer.</p>
<p class="rubric">Template parameters</p>
<table class="table">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>InputIterator</p></td>
<td><p>type of iterator used to initialize the buffer</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Parameters</p>
<table class="table">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>bufferRange</p></td>
<td><p><a class="reference internal" href="range.html#range"><span class="std std-ref">sycl::range</span></a> specifies the dimensions of the buffer</p></td>
</tr>
<tr class="row-even"><td><p>allocator</p></td>
<td><p>Allocator for buffer data</p></td>
</tr>
<tr class="row-odd"><td><p>propList</p></td>
<td><p>See <a class="reference internal" href="#buffer-properties">Buffer properties</a></p></td>
</tr>
<tr class="row-even"><td><p>hostData</p></td>
<td><p>Pointer to host memory to hold data</p></td>
</tr>
<tr class="row-odd"><td><p>first</p></td>
<td><p>Iterator to initialize buffer</p></td>
</tr>
<tr class="row-even"><td><p>last</p></td>
<td><p>Iterator to initialize buffer</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>Buffer used to initialize this buffer</p></td>
</tr>
<tr class="row-even"><td><p>baseIndx</p></td>
<td><p>Origin of sub-buffer</p></td>
</tr>
<tr class="row-odd"><td><p>subRange</p></td>
<td><p>Dimensions of sub-buffer</p></td>
</tr>
</tbody>
</table>
</section>
<section id="get-range">
<h3>get_range<a class="headerlink" href="#get-range" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sycl</span><span class="p">::</span><span class="nb">range</span><span class="o">&lt;</span><span class="n">dimensions</span><span class="o">&gt;</span> <span class="n">get_range</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Returns the dimensions of the buffer.</p>
</section>
<section id="get-count">
<h3>get_count<a class="headerlink" href="#get-count" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">size_t</span> <span class="n">get_count</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Returns the total number of elements in the buffer.</p>
</section>
<section id="get-size">
<h3>get_size<a class="headerlink" href="#get-size" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">size_t</span> <span class="n">get_size</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Returns the size of the buffer storage in bytes.</p>
</section>
<section id="get-allocator">
<h3>get_allocator<a class="headerlink" href="#get-allocator" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AllocatorT</span> <span class="n">get_allocator</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Returns the allocator provided to the buffer.</p>
</section>
<section id="get-access">
<span id="buffer-get-access"></span><h3>get_access<a class="headerlink" href="#get-access" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">mode</span> <span class="n">mode</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span> <span class="n">target</span> <span class="o">=</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span><span class="p">::</span><span class="n">global_buffer</span><span class="o">&gt;</span>
<span class="n">accessor</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">target</span><span class="o">&gt;</span> <span class="n">get_access</span><span class="p">(</span>
    <span class="n">sycl</span><span class="p">::</span><span class="n">handler</span> <span class="o">&amp;</span><span class="n">commandGroupHandler</span><span class="p">);</span>
<span class="n">template</span> <span class="o">&lt;</span><span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">mode</span> <span class="n">mode</span><span class="o">&gt;</span>
<span class="n">accessor</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span><span class="p">::</span><span class="n">host_buffer</span><span class="o">&gt;</span> <span class="n">get_access</span><span class="p">();</span>
<span class="n">template</span> <span class="o">&lt;</span><span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">mode</span> <span class="n">mode</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span> <span class="n">target</span> <span class="o">=</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span><span class="p">::</span><span class="n">global_buffer</span><span class="o">&gt;</span>
<span class="n">accessor</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">target</span><span class="o">&gt;</span> <span class="n">get_access</span><span class="p">(</span>
    <span class="n">sycl</span><span class="p">::</span><span class="n">handler</span> <span class="o">&amp;</span><span class="n">commandGroupHandler</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="nb">range</span><span class="o">&lt;</span><span class="n">dimensions</span><span class="o">&gt;</span> <span class="n">accessRange</span><span class="p">,</span>
    <span class="nb">id</span><span class="o">&lt;</span><span class="n">dimensions</span><span class="o">&gt;</span> <span class="n">accessOffset</span> <span class="o">=</span> <span class="p">{});</span>
<span class="n">template</span> <span class="o">&lt;</span><span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">mode</span> <span class="n">mode</span><span class="o">&gt;</span>
<span class="n">accessor</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="n">access</span><span class="p">::</span><span class="n">target</span><span class="p">::</span><span class="n">host_buffer</span><span class="o">&gt;</span> <span class="n">get_access</span><span class="p">(</span>
  <span class="n">sycl</span><span class="p">::</span><span class="nb">range</span><span class="o">&lt;</span><span class="n">dimensions</span><span class="o">&gt;</span> <span class="n">accessRange</span><span class="p">,</span> <span class="n">sycl</span><span class="p">::</span><span class="nb">id</span><span class="o">&lt;</span><span class="n">dimensions</span><span class="o">&gt;</span> <span class="n">accessOffset</span> <span class="o">=</span> <span class="p">{});</span>
</pre></div>
</div>
<p>Returns a accessor to the buffer.</p>
<p class="rubric">Template parameters</p>
<table class="table">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>See <a class="reference internal" href="accessor-enums.html#access-mode"><span class="std std-ref">sycl::access::mode</span></a></p></td>
</tr>
<tr class="row-even"><td><p>target</p></td>
<td><p>See <a class="reference internal" href="accessor-enums.html#access-target"><span class="std std-ref">sycl::access::target</span></a></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Parameters</p>
<table class="table">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>commandGroupHandler</p></td>
<td><p>Command group that uses the accessor</p></td>
</tr>
<tr class="row-even"><td><p>accessRange</p></td>
<td><p>Dimensions of the sub-buffer that is accessed</p></td>
</tr>
<tr class="row-odd"><td><p>accessOffset</p></td>
<td><p>Origin of the sub-buffer that is accessed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="set-final-data">
<h3>set_final_data<a class="headerlink" href="#set-final-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">Destination</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">nullptr_t</span><span class="o">&gt;</span>
<span class="n">void</span> <span class="n">set_final_data</span><span class="p">(</span><span class="n">Destination</span> <span class="n">finalData</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">);</span>
</pre></div>
</div>
<p class="rubric">Template parameters</p>
<table class="table">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Destination</p></td>
<td><p>std::weak_ptr&lt;T&gt; or output iterator</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Parameters</p>
<table class="table">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>finalData</p></td>
<td><p>Indicates where data is copied at destruction time</p></td>
</tr>
</tbody>
</table>
<p>Set the final data location. Final data controls the location for
write back when the buffer is destroyed.</p>
</section>
<section id="set-write-back">
<h3>set_write_back<a class="headerlink" href="#set-write-back" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">set_write_back</span><span class="p">(</span><span class="nb">bool</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">true</span><span class="p">);</span>
</pre></div>
</div>
<p class="rubric">Parameters</p>
<table class="table">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>flag</p></td>
<td><p>True to force write back</p></td>
</tr>
</tbody>
</table>
<p>Set the write back.</p>
</section>
<section id="is-sub-buffer">
<h3>is_sub_buffer<a class="headerlink" href="#is-sub-buffer" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">is_sub_buffer</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p>Returns True if this is a sub-buffer.</p>
</section>
<section id="reinterpret">
<h3>reinterpret<a class="headerlink" href="#reinterpret" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">ReinterpretT</span><span class="p">,</span> <span class="nb">int</span> <span class="n">ReinterpretDim</span><span class="o">&gt;</span>
<span class="n">buffer</span><span class="o">&lt;</span><span class="n">ReinterpretT</span><span class="p">,</span> <span class="n">ReinterpretDim</span><span class="p">,</span> <span class="n">AllocatorT</span><span class="o">&gt;</span>
<span class="n">reinterpret</span><span class="p">(</span><span class="nb">range</span><span class="o">&lt;</span><span class="n">ReinterpretDim</span><span class="o">&gt;</span> <span class="n">reinterpretRange</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
<p class="rubric">Template parameters</p>
<table class="table">
<colgroup>
<col style="width: 42%" />
<col style="width: 58%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>ReinterpretT</p></td>
<td><p>Type of new buffer element</p></td>
</tr>
<tr class="row-even"><td><p>ReinterpretDim</p></td>
<td><p>Dimensions of new buffer</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Parameters</p>
<table class="table">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>ReinterpretRange</p></td>
<td><p>Dimensionality of new buffer</p></td>
</tr>
</tbody>
</table>
<p>Creates a new buffer with the requested element type and
dimensionality, containing the data of the passed buffer or
sub-buffer.</p>
<p class="rubric">Exceptions</p>
<dl class="simple">
<dt>errc::invalid_object_error</dt><dd><p>Size in bytes of new buffer does not match original buffer.</p>
</dd>
</dl>
</section>
</section>
<section id="buffer-properties">
<h2>Buffer properties<a class="headerlink" href="#buffer-properties" title="Permalink to this headline">¶</a></h2>
<section class="api-class" id="sycl-propery-buffer-use-host-ptr">
<h3>sycl::propery::buffer:use_host_ptr<a class="headerlink" href="#sycl-propery-buffer-use-host-ptr" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">use_host_ptr</span><span class="p">;</span>
</pre></div>
</div>
<p>Use the provided host pointer and do not allocate new data on the
host.</p>
<section id="use-host-ptr-constructors">
<span id="id1"></span><h4>(constructors)<a class="headerlink" href="#use-host-ptr-constructors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">use_host_ptr</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section class="api-class" id="sycl-property-use-mutex">
<h3>sycl::property::use_mutex<a class="headerlink" href="#sycl-property-use-mutex" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">use_mutex</span><span class="p">;</span>
</pre></div>
</div>
<p>Adds the requirement that the memory owned by the SYCL buffer can be
shared with the application via a std::mutex provided to the property.</p>
<section id="use-mutex-constructors">
<span id="id2"></span><h4>(constructors)<a class="headerlink" href="#use-mutex-constructors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">use_mutex</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="get-mutex-ptr">
<h4>get_mutex_ptr<a class="headerlink" href="#get-mutex-ptr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sycl</span><span class="p">::</span><span class="n">mutex_class</span> <span class="o">*</span><span class="n">get_mutex_ptr</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="sycl-property-buffer-context-bound">
<h3>sycl::property::buffer::context_bound<a class="headerlink" href="#sycl-property-buffer-context-bound" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">context_bound</span><span class="p">;</span>
</pre></div>
</div>
<p>The buffer can only be associated with a single SYCL context provided
to the property.</p>
<section id="context-bound-constructors">
<span id="id3"></span><h4>(constructors)<a class="headerlink" href="#context-bound-constructors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">use_mutex</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="get-context">
<h4>get_context<a class="headerlink" href="#get-context" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sycl</span><span class="p">::</span><span class="n">context</span> <span class="n">get_context</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="../data.html" title="previous page">Data access</a>
    <a class='right-next' id="next-link" href="image.html" title="next page">Images</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Intel<br/>
        
            &copy; Copyright 2020, Intel.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>